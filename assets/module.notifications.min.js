!function(t){"use strict";theme.Notifications=function(){function i(){this.selectors={elems:".js-notification"},this.settings={close_limit:40,translate_limit:50,opacity_limit:.4},this.load()}i.prototype=t.extend({},i.prototype,{load:function(){var i,n=this;$body.on("mousedown",this.selectors.elems,(function(e){if("A"!==e.target.tagName&&!t(e.target).parents("[data-js-action]").length){n.is_holded=!0;var o=t(this),s=e.screenX;return i=0,o.addClass("animate"),setTimeout((function(){o.addClass("pressed")}),0),$body.on("mousemove.notification",(function(t){var e=t.screenX,a=Math.min(s+n.settings.translate_limit,Math.max(s-n.settings.translate_limit,e));i=a-s,o.removeClass("animate"),setTimeout((function(){o.css({transform:"translateX("+i+"px) scale(0.95)",opacity:Math.max((n.settings.translate_limit-Math.abs(i))/n.settings.translate_limit,n.settings.opacity_limit)})}),0),setTimeout((function(){o.addClass("animate")}),0)})),$body.one("mouseup.notification",(function(){o.trigger("mouseup")})),e.preventDefault(),!1}})),$body.on("mouseup",this.selectors.elems,(function(){var e=t(this);n.is_holded=!1,$body.unbind("mousemove.notification mouseup.notification"),setTimeout((function(){if(Math.abs(i)>n.settings.close_limit){var t=e.find("[data-js-notification-inner]"),o=t.find('[data-js-action="close"]').first();if(t.hasClass("d-none"))return;e.one("transitionend",(function(){i=0,e.trigger("mouseup").trigger("transitionend"),o.trigger("click"),t.trigger("transitionend"),e.trigger("onpressedend")})),e.css({transform:"translateX("+(i+20)+"px) scale(0.95)",opacity:0})}else e.removeClass("pressed"),e.one("transitionend",(function(){e.removeClass("animate"),e.trigger("onpressedend")})),e.css({transform:"",opacity:""});"0s"===e.css("transition-duration")&&e.trigger("transitionend")}),0)})),$body.on("close",this.selectors.elems,(function(){var i=t(this);$body.unbind("mousemove.notification"),i.trigger("mouseup").trigger("transitionend")})),this._products(),this._cookies()},_cookies:function(){var i,n,e,o,s,a=this,r=t(".js-notification-cookies");function c(){i.one("click",(function(){if("true"===e){var i=new Date,n=864e5*s;i.setTime(i.getTime()+n),t.cookie("notification-cookies","off",{expires:i,path:"/"})}a._hide(r,(function(){r.remove()})),t(this).off()}))}if(r.length)return i=r.find('[data-js-action="close"]'),n=t.cookie("notification-cookies"),e=r.attr("data-js-show-once"),o=+r.attr("data-js-delay"),s=+r.attr("data-js-cookies-life"),"off"!==n&&(o>0?setTimeout((function(){a._show(r,(function(){c()}))}),1e3*o):c()),i},_products:function(){var i=this,n=t(".js-notification-products");if(n.length){var e,o,s,a,r=n.find('[data-js-action="close"]'),c=n.find("[data-js-notification-products-item]"),d=+n.attr("data-js-delay"),u=+n.attr("data-js-interval-min"),f=+n.attr("data-js-interval-max"),l=+n.attr("data-js-max-time-life");return setTimeout((function(){g()}),1e3*d),r.on("click",(function(){clearTimeout(a),i._hide(n)})),r}function m(t,i){return Math.round(t-.5+Math.random()*(i-t+1))}function h(){i._hide(n,(function(){g()}))}function g(){clearInterval(s),!n.hasClass("d-none")||i.is_holded?i.is_holded?n.parents(".js-notification").one("onpressedend",(function(){h()})):n.is(":hover")?n.one("mouseleave",(function(){h()})):h():(e=c.eq(m(0,c.length-1)),o=m(u,f),c.addClass("d-none"),e.removeClass("d-none"),i._show(n,(function(){a=setTimeout((function(){g()}),1e3*o),0!==l&&(s=setTimeout((function(){i._hide(n)}),1e3*l))}),(function(t){t()})))}},_show:function(t,i,n){function e(){setTimeout((function(){t.addClass("visible")}),0),"0s"===t.css("transition-duration")&&t.trigger("transitionend")}t.unbind("transitionend"),i&&t.one("transitionend",(function(){i()})),t.removeClass("d-none"),t.addClass("animate"),n?n(e):e()},_hide:function(t,i){t.unbind("transitionend"),t.one("transitionend",(function(){t.addClass("d-none").removeClass("animate").removeAttr("style"),t.parents(".js-notification").trigger("close"),i&&i()})),t.removeClass("visible"),"0s"===t.css("transition-duration")&&t.trigger("transitionend")},destroy:function(){t(".js-notification-cookies, .js-notification-products").find('[data-js-action="close"]').off()}}),theme.Notifications=new i},t((function(){theme.Notifications()}))}(jQueryTheme);